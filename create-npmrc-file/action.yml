name: "create .npmrc file"
description: "creates .npmrc file needed for npm installs"
author: "eDACT"
inputs:
  npm_registry_url:
    description: "URL of the npm registry, no trailing slashes"
    default: "npm.pkg.github.com"
    required: false
  npm_scope:
    description: "scope that should be used"
    default: "@edact"
    required: false
  npm_token:
    description: "token for the registry"
    required: true

runs:
  using: "composite"
  steps:
    - shell: bash
      run: |
        # makes the script existing once an error occours
        set -euo pipefail

        printf "${{ inputs.npm_scope }}:registry=https://${{ inputs.npm_registry_url }}/ \n //${{ inputs.npm_registry_url }}/:_authToken=${{ inputs.npm_token }}"> .npmrc
